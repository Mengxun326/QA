# Q&A平台管理员账号创建说明

## 概述

Q&A平台需要管理员账号来管理用户提交的问题和回复。本文档将详细介绍如何创建管理员账号。

## 创建方法

### 方法一：使用图形化工具（推荐）

1. **双击运行批处理文件**
   ```
   双击 create-admin.bat 文件
   ```

2. **按照提示操作**
   - 输入用户名（默认：admin）
   - 输入密码（默认：admin123）
   - 确认密码
   - 等待创建完成

### 方法二：使用npm命令

1. **运行npm脚本**
   ```bash
   npm run create-admin
   ```

2. **或者进入server目录运行**
   ```bash
   cd server
   npm run create-admin
   ```

### 方法三：直接运行脚本

1. **进入server目录**
   ```bash
   cd server
   node create-admin.js
   ```

### 方法四：使用API接口

如果服务器已经启动，可以通过API接口创建：

```bash
curl -X POST http://localhost:5000/api/auth/create-admin \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

## 前置条件

在创建管理员账号之前，请确保：

### 1. 环境准备
- ✅ Node.js 已安装
- ✅ MySQL 数据库已启动
- ✅ 数据库 `qa_platform` 已创建
- ✅ 数据库表结构已初始化

### 2. 配置文件
确保 `server/.env` 文件存在并包含正确的数据库配置：

```env
# 数据库配置
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=qa_platform

# JWT密钥
JWT_SECRET=your_jwt_secret_key

# 服务器端口
PORT=5000
```

### 3. 数据库初始化
如果还没有创建数据库，请运行：

```bash
mysql -u root -p < database.sql
```

### 4. 依赖包安装
确保服务器依赖包已安装：

```bash
cd server
npm install
```

## 详细步骤

### 步骤1：检查环境
确保您的系统满足以下要求：
- Node.js 版本 14 或更高
- MySQL 5.7 或更高版本
- 网络连接正常

### 步骤2：安装依赖
如果还没有安装项目依赖，请运行：

```bash
npm run install-all
```

### 步骤3：创建管理员账号
选择以下任一方法：

#### 方法A：图形化工具
```bash
# Windows
双击 create-admin.bat

# 或使用npm脚本
npm run create-admin
```

#### 方法B：命令行工具
```bash
cd server
npm run create-admin
```

### 步骤4：输入账号信息
按照提示输入：
- **用户名**：建议使用有意义的用户名，如 `admin`、`manager` 等
- **密码**：建议使用强密码，至少6位字符
- **确认密码**：再次输入相同密码

### 步骤5：验证创建结果
创建成功后，您将看到：
```
✅ 管理员账号创建成功！

📋 账号信息：
   用户名: admin
   密码: admin123
   账号ID: 1

🔗 登录信息：
   登录地址: http://localhost:3000/login
   或直接访问: http://localhost:3000/admin
```

## 登录使用

### 1. 启动服务
```bash
npm run dev
```

### 2. 访问登录页面
- 打开浏览器访问：http://localhost:3000/login
- 或直接访问：http://localhost:3000/admin

### 3. 输入账号信息
- 用户名：您创建的管理员用户名
- 密码：您设置的密码

### 4. 进入管理面板
登录成功后，您将进入管理员控制台，可以：
- 查看所有用户提交的问题
- 回复用户问题
- 删除不当内容
- 查看统计信息

## 安全建议

### 1. 密码安全
- 使用强密码（至少8位，包含字母、数字、特殊字符）
- 定期更换密码
- 不要在多个平台使用相同密码

### 2. 账号管理
- 定期检查管理员账号
- 及时删除不需要的账号
- 限制管理员权限

### 3. 系统安全
- 定期备份数据库
- 监控系统日志
- 及时更新系统

## 故障排除

### 常见问题

#### 1. 数据库连接失败
**错误信息**：`数据库连接失败: ER_ACCESS_DENIED_ERROR`

**解决方案**：
- 检查MySQL服务是否启动
- 验证数据库用户名和密码
- 确认数据库用户有足够权限

#### 2. 数据库不存在
**错误信息**：`Unknown database 'qa_platform'`

**解决方案**：
```bash
# 创建数据库
mysql -u root -p < database.sql
```

#### 3. 表结构不存在
**错误信息**：`Table 'qa_platform.admins' doesn't exist`

**解决方案**：
```bash
# 重新运行数据库初始化脚本
mysql -u root -p < database.sql
```

#### 4. 权限不足
**错误信息**：`ER_ACCESS_DENIED_ERROR`

**解决方案**：
```sql
-- 在MySQL中执行
GRANT ALL PRIVILEGES ON qa_platform.* TO 'your_username'@'localhost';
FLUSH PRIVILEGES;
```

#### 5. 端口被占用
**错误信息**：`EADDRINUSE`

**解决方案**：
- 检查端口是否被其他程序占用
- 修改配置文件中的端口号
- 关闭占用端口的程序

#### 6. 依赖包缺失
**错误信息**：`Cannot find module 'bcryptjs'`

**解决方案**：
```bash
# 安装服务器依赖
cd server
npm install

# 或安装所有依赖
npm run install-all
```

### 获取帮助

如果遇到其他问题，请：

1. 检查控制台错误信息
2. 查看服务器日志
3. 确认所有前置条件已满足
4. 参考项目README文档

## 联系支持

如果您需要技术支持，请：
- 查看项目文档
- 提交Issue到项目仓库
- 联系项目维护者

---

**注意**：管理员账号具有系统最高权限，请妥善保管账号信息，不要在不安全的环境下使用默认密码。 