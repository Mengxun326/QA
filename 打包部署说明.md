# ğŸ“¦ Q&Aå¹³å°æ‰“åŒ…éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•å°†Q&Aé—®ç­”å¹³å°æ‰“åŒ…æˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åŒ…ï¼Œå¹¶åœ¨å®å¡”é¢æ¿ä¸Šè¿›è¡Œéƒ¨ç½²ã€‚

## ğŸ“‹ æ‰“åŒ…å‰å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚
- **Node.js**: 16.0+ ç‰ˆæœ¬
- **npm**: 8.0+ ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows 10+ æˆ– Linux/macOS

### 2. æ£€æŸ¥é¡¹ç›®å®Œæ•´æ€§
ç¡®ä¿é¡¹ç›®åŒ…å«ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ï¼š
```
qa-platform/
â”œâ”€â”€ client/          # å‰ç«¯Reacté¡¹ç›®
â”œâ”€â”€ server/          # åç«¯Node.jsé¡¹ç›®
â”œâ”€â”€ database.sql     # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ package.json     # æ ¹é¡¹ç›®é…ç½®
â”œâ”€â”€ build.sh         # Linux/macOSæ‰“åŒ…è„šæœ¬
â”œâ”€â”€ build.bat        # Windowsæ‰“åŒ…è„šæœ¬
â””â”€â”€ éƒ¨ç½²ç›¸å…³æ–‡ä»¶...
```

## ğŸš€ æ‰“åŒ…æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨npmè„šæœ¬ï¼ˆæ¨èï¼‰

#### Linux/macOSç¯å¢ƒï¼š
```bash
npm run package
# æˆ–è€…
npm run build-production
```

#### Windowsç¯å¢ƒï¼š
```bash
npm run package-win
# æˆ–è€…
npm run build-windows
```

### æ–¹æ³•äºŒï¼šç›´æ¥è¿è¡Œè„šæœ¬

#### Linux/macOSç¯å¢ƒï¼š
```bash
chmod +x build.sh
./build.sh
```

#### Windowsç¯å¢ƒï¼š
```cmd
build.bat
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨æ‰“åŒ…

å¦‚æœè‡ªåŠ¨è„šæœ¬æ— æ³•è¿è¡Œï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨æ‰“åŒ…ï¼š

#### 1. å®‰è£…åç«¯ä¾èµ–
```bash
cd server
npm install --production
cd ..
```

#### 2. æ„å»ºå‰ç«¯
```bash
cd client
npm install
npm run build
cd ..
```

#### 3. åˆ›å»ºæ‰“åŒ…ç›®å½•
```bash
mkdir build
mkdir build/server
mkdir build/client
```

#### 4. å¤åˆ¶æ–‡ä»¶
```bash
# å¤åˆ¶åç«¯æ–‡ä»¶
cp -r server/*.js build/server/
cp -r server/package*.json build/server/
cp -r server/routes build/server/
cp -r server/middleware build/server/
cp -r server/config build/server/
cp -r server/node_modules build/server/
cp server/config.env.example build/server/

# å¤åˆ¶å‰ç«¯æ„å»ºæ–‡ä»¶
cp -r client/build build/client/
cp client/package.json build/client/

# å¤åˆ¶é…ç½®å’Œæ–‡æ¡£
cp database.sql build/
cp ecosystem.config.js build/
cp nginx.conf.template build/
cp *.md build/
```

## ğŸ“¦ æ‰“åŒ…ç»“æœ

æ‰“åŒ…å®Œæˆåï¼Œä¼šåœ¨ `dist/` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
dist/
â”œâ”€â”€ qa-platform-YYYYMMDD_HHMMSS.tar.gz  # Linuxå‹ç¼©åŒ…
â””â”€â”€ qa-platform-YYYYMMDD_HHMMSS.zip     # Windowså‹ç¼©åŒ…
```

## ğŸ“ éƒ¨ç½²åŒ…ç»“æ„

è§£å‹åçš„éƒ¨ç½²åŒ…åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

```
qa-platform/
â”œâ”€â”€ server/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ index.js              # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json          # åç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ config.env.example    # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â”œâ”€â”€ routes/               # APIè·¯ç”±
â”‚   â”œâ”€â”€ middleware/           # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ node_modules/         # åç«¯ä¾èµ–åŒ…
â”œâ”€â”€ client/                   # å‰ç«¯æ„å»ºæ–‡ä»¶
â”‚   â””â”€â”€ build/                # Reactæ„å»ºäº§ç‰©
â”œâ”€â”€ database.sql              # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ ecosystem.config.js       # PM2é…ç½®æ–‡ä»¶
â”œâ”€â”€ nginx.conf.template       # Nginxé…ç½®æ¨¡æ¿
â”œâ”€â”€ install.sh                # è‡ªåŠ¨å®‰è£…è„šæœ¬
â”œâ”€â”€ VERSION.txt               # ç‰ˆæœ¬ä¿¡æ¯
â”œâ”€â”€ README.md                 # éƒ¨ç½²è¯´æ˜
â”œâ”€â”€ å®å¡”éƒ¨ç½²æŒ‡å—.md           # è¯¦ç»†éƒ¨ç½²æŒ‡å—
â””â”€â”€ å®å¡”éƒ¨ç½²å¿«é€ŸæŒ‡å—.md       # å¿«é€Ÿéƒ¨ç½²æŒ‡å—
```

## ğŸš€ éƒ¨ç½²æµç¨‹

### 1. ä¸Šä¼ éƒ¨ç½²åŒ…

å°†ç”Ÿæˆçš„å‹ç¼©åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼š

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨scp
scp qa-platform-*.tar.gz root@your-server:/tmp/

# æ–¹å¼äºŒï¼šä½¿ç”¨å®å¡”é¢æ¿æ–‡ä»¶ç®¡ç†å™¨ç›´æ¥ä¸Šä¼ 
```

### 2. è§£å‹éƒ¨ç½²åŒ…

```bash
cd /www/wwwroot
tar -xzf /tmp/qa-platform-*.tar.gz
mv qa-platform-* qa-platform
```

### 3. è¿è¡Œå®‰è£…è„šæœ¬

```bash
cd /www/wwwroot/qa-platform
chmod +x install.sh
./install.sh
```

### 4. é…ç½®æ•°æ®åº“

1. åœ¨å®å¡”é¢æ¿ä¸­åˆ›å»ºæ•°æ®åº“ï¼š
   - æ•°æ®åº“åï¼š`qa_platform`
   - ç”¨æˆ·åï¼š`qa_user`ï¼ˆå»ºè®®ï¼‰
   - å¯†ç ï¼šè®¾ç½®å¼ºå¯†ç 

2. å¯¼å…¥æ•°æ®åº“ç»“æ„ï¼š
   ```bash
   mysql -u qa_user -p qa_platform < database.sql
   ```

### 5. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `/www/wwwroot/qa-platform/server/config.env`ï¼š

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_USER=qa_user
DB_PASSWORD=your_database_password
DB_NAME=qa_platform

# JWTå¯†é’¥ï¼ˆè¯·è®¾ç½®å¤æ‚å¯†é’¥ï¼‰
JWT_SECRET=your_super_secret_jwt_key_here

# æœåŠ¡å™¨ç«¯å£
PORT=5000

# ç®¡ç†å‘˜é»˜è®¤è´¦å·
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
```

### 6. é…ç½®Nginx

åœ¨å®å¡”é¢æ¿ä¸­ï¼š
1. æ·»åŠ ç½‘ç«™ï¼Œæ ¹ç›®å½•è®¾ä¸ºï¼š`/www/wwwroot/qa-platform/client/build`
2. é…ç½®åå‘ä»£ç†ï¼Œå‚è€ƒ `nginx.conf.template`

### 7. åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·

```bash
cd /www/wwwroot/qa-platform/server
npm run create-admin
```

### 8. å¯åŠ¨æœåŠ¡

```bash
cd /www/wwwroot/qa-platform
pm2 start ecosystem.config.js --env production
pm2 save
pm2 startup
```

## ğŸ”§ éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
pm2 status
pm2 logs qa-platform-server
```

### 2. æµ‹è¯•ç½‘ç«™è®¿é—®
- è®¿é—®ä½ çš„åŸŸå
- æµ‹è¯•ç®¡ç†å‘˜ç™»å½•åŠŸèƒ½
- æµ‹è¯•æé—®å’Œå›ç­”åŠŸèƒ½

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### å¸¸ç”¨å‘½ä»¤
```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
pm2 status

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs qa-platform-server

# é‡å¯åº”ç”¨
pm2 restart qa-platform-server

# åœæ­¢åº”ç”¨
pm2 stop qa-platform-server

# æŸ¥çœ‹å®æ—¶ç›‘æ§
pm2 monit
```

### æ›´æ–°éƒ¨ç½²
```bash
# 1. å¤‡ä»½æ•°æ®åº“
mysqldump -u qa_user -p qa_platform > backup.sql

# 2. åœæ­¢æœåŠ¡
pm2 stop qa-platform-server

# 3. è§£å‹æ–°ç‰ˆæœ¬
cd /www/wwwroot
tar -xzf qa-platform-new.tar.gz
cp -r qa-platform-new/* qa-platform/

# 4. é‡å¯æœåŠ¡
cd qa-platform
pm2 restart qa-platform-server
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ‰“åŒ…å¤±è´¥
- **Node.jsç‰ˆæœ¬è¿‡ä½**ï¼šå‡çº§åˆ°16+ç‰ˆæœ¬
- **ä¾èµ–å®‰è£…å¤±è´¥**ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œå°è¯•ä½¿ç”¨æ·˜å®é•œåƒ
- **æƒé™é—®é¢˜**ï¼šç¡®ä¿æœ‰å†™å…¥æƒé™

### 2. éƒ¨ç½²å¤±è´¥
- **ç«¯å£è¢«å ç”¨**ï¼šæ£€æŸ¥5000ç«¯å£æ˜¯å¦è¢«å ç”¨
- **æ•°æ®åº“è¿æ¥å¤±è´¥**ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶å’Œæ•°æ®åº“æƒé™
- **Nginxé…ç½®é”™è¯¯**ï¼šæ£€æŸ¥åå‘ä»£ç†é…ç½®

### 3. è¿è¡Œæ—¶é—®é¢˜
- **å‰ç«¯æ— æ³•åŠ è½½**ï¼šæ£€æŸ¥Nginxé…ç½®å’Œæ–‡ä»¶æƒé™
- **APIè¯·æ±‚å¤±è´¥**ï¼šæ£€æŸ¥åå‘ä»£ç†å’Œåç«¯æœåŠ¡çŠ¶æ€
- **ç®¡ç†å‘˜æ— æ³•ç™»å½•**ï¼šæ£€æŸ¥æ•°æ®åº“å’ŒJWTé…ç½®

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. æ€§èƒ½ä¼˜åŒ–
- å¯ç”¨Nginx Gzipå‹ç¼©
- é…ç½®é™æ€èµ„æºç¼“å­˜
- ä½¿ç”¨CDNåŠ é€Ÿ

### 2. å®‰å…¨ä¼˜åŒ–
- é…ç½®SSLè¯ä¹¦
- è®¾ç½®é˜²ç«å¢™è§„åˆ™
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…

### 3. ç›‘æ§ä¼˜åŒ–
- é…ç½®æ—¥å¿—è½®è½¬
- è®¾ç½®ç›‘æ§å‘Šè­¦
- å®šæœŸå¤‡ä»½æ•°æ®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š

1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š`pm2 logs qa-platform-server`
2. æ£€æŸ¥Nginxé”™è¯¯æ—¥å¿—ï¼š`/var/log/nginx/error.log`
3. éªŒè¯é…ç½®æ–‡ä»¶ï¼šæ£€æŸ¥ `config.env` å’Œæ•°æ®åº“è¿æ¥
4. æŸ¥çœ‹ç³»ç»Ÿèµ„æºï¼š`top`, `df -h`, `free -m`

---

**ç¥æ‚¨éƒ¨ç½²æˆåŠŸï¼** ğŸ‰ 